<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zeitform-Türenspiel</title>
<style>
  body {
    font-family: sans-serif;
    background-color: #eef;
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  .question-box {
    background-color: white;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  .score-box {
    margin-bottom: 15px;
    font-size: 18px;
  }
  .doors {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  .door {
    width: 30%;
    min-width: 150px;
    background-color: #ccc;
    padding: 15px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s;
    user-select: none;
  }
  .door.correct {
    background-color: #8f8;
  }
  .door.wrong {
    background-color: #f88;
  }
  @media (max-width: 600px) {
    .door {
      width: 80%;
    }
  }
</style>
</head>
<body>

<h1>Zeitform-Türenspiel</h1>
<div class="score-box" id="score">Sterne: 0 | Goldmünzen: 0</div>
<div class="question-box" id="question">Lade Frage...</div>
<div class="doors" id="choices"></div>

<script>
const fragen = [
  {
    verb: "gehen",
    saetze: {
      präsens: "Ich gehe ins Kino.",
      präteritum: "Ich ging ins Kino.",
      perfekt: "Ich bin ins Kino gegangen."
    }
  },
  {
    verb: "lernen",
    saetze: {
      präsens: "Du lernst Deutsch.",
      präteritum: "Du lerntest Deutsch.",
      perfekt: "Du hast Deutsch gelernt."
    }
  },
  {
    verb: "bringen",
    saetze: {
      präsens: "Er bringt den Kuchen mit.",
      präteritum: "Er brachte den Kuchen mit.",
      perfekt: "Er hat den Kuchen mitgebracht."
    }
  },
  {
    verb: "arbeiten",
    saetze: {
      präsens: "Wir arbeiten zusammen.",
      präteritum: "Wir arbeiteten zusammen.",
      perfekt: "Wir haben zusammen gearbeitet."
    }
  },
  {
    verb: "fahren",
    saetze: {
      präsens: "Ihr fahrt nach Berlin.",
      präteritum: "Ihr fuhrt nach Berlin.",
      perfekt: "Ihr seid nach Berlin gefahren."
    }
  }
];

let richtigeAntworten = parseInt(localStorage.getItem("richtigeAntworten")) || 0;
let sterne = parseInt(localStorage.getItem("sterne")) || 0;
let gold = parseInt(localStorage.getItem("gold")) || 0;

function updateScore() {
  document.getElementById("score").textContent = `Sterne: ${sterne} | Goldmünzen: ${gold}`;
}

function saveScore() {
  localStorage.setItem("richtigeAntworten", richtigeAntworten);
  localStorage.setItem("sterne", sterne);
  localStorage.setItem("gold", gold);
}

function ladeFrage() {
  const eintrag = fragen[Math.floor(Math.random() * fragen.length)];
  const korrektForm = ["präsens", "präteritum", "perfekt"][Math.floor(Math.random() * 3)];
  const frageText = eintrag.saetze[korrektForm];
  const korrekt = frageText;

  const falsche = Object.entries(eintrag.saetze).filter(([zeitform, satz]) => satz !== korrekt).map(([_, s]) => s);
  const antworten = [korrekt, ...falsche].sort(() => Math.random() - 0.5);

  document.getElementById("question").textContent = `Welche Satzform ist in "${frageText}"?`;

  const choiceBox = document.getElementById("choices");
  choiceBox.innerHTML = "";

  antworten.forEach(antwort => {
    const btn = document.createElement("div");
    btn.className = "door";
    btn.textContent = antwort;
    btn.onclick = () => pruefeAntwort(btn, antwort, korrekt);
    choiceBox.appendChild(btn);
  });
}

function pruefeAntwort(button, antwort, korrekt) {
  const kinder = document.querySelectorAll('.door');
  kinder.forEach(el => {
    el.classList.remove('correct', 'wrong');
    if (el.textContent === korrekt) {
      el.classList.add('correct');
    } else if (el.textContent === antwort) {
      el.classList.add('wrong');
    }
    el.onclick = null;
  });

  if (antwort === korrekt) {
    richtigeAntworten++;
    if (richtigeAntworten % 10 === 0) {
      sterne++;
      if (sterne % 10 === 0) {
        gold++;
        sterne = 0;
      }
    }
    saveScore();
    updateScore();
  }

  setTimeout(() => {
    ladeFrage();
  }, 1500);
}

updateScore();
ladeFrage();
</script>

</body>
</html>
